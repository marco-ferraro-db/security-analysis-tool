"use strict";(self.webpackChunksat=self.webpackChunksat||[]).push([[369],{2362:(e,n,t)=>{t.d(n,{A:()=>P});var r=t(6540),i=t(4848);function o(e){const{mdxAdmonitionTitle:n,rest:t}=function(e){const n=r.Children.toArray(e),t=n.find((e=>r.isValidElement(e)&&"mdxAdmonitionTitle"===e.type)),o=n.filter((e=>e!==t)),s=t?.props.children;return{mdxAdmonitionTitle:s,rest:o.length>0?(0,i.jsx)(i.Fragment,{children:o}):null}}(e.children),o=e.title??n;return{...e,...o&&{title:o},children:t}}var s=t(4164),a=t(539),c=t(204);const l="admonition_xJq3",d="admonitionHeading_Gvgb",h="admonitionIcon_Rf37",u="admonitionContent_BuS1";function p({type:e,className:n,children:t}){return(0,i.jsx)("div",{className:(0,s.A)(c.G.common.admonition,c.G.common.admonitionType(e),l,n),children:t})}function m({icon:e,title:n}){return(0,i.jsxs)("div",{className:d,children:[(0,i.jsx)("span",{className:h,children:e}),n]})}function f({children:e}){return e?(0,i.jsx)("div",{className:u,children:e}):null}function x(e){const{type:n,icon:t,title:r,children:o,className:s}=e;return(0,i.jsxs)(p,{type:n,className:s,children:[r||t?(0,i.jsx)(m,{title:r,icon:t}):null,(0,i.jsx)(f,{children:o})]})}function j(e){return(0,i.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}const g={icon:(0,i.jsx)(j,{}),title:(0,i.jsx)(a.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function v(e){return(0,i.jsx)(x,{...g,...e,className:(0,s.A)("alert alert--secondary",e.className),children:e.children})}function y(e){return(0,i.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}const b={icon:(0,i.jsx)(y,{}),title:(0,i.jsx)(a.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function T(e){return(0,i.jsx)(x,{...b,...e,className:(0,s.A)("alert alert--success",e.className),children:e.children})}function k(e){return(0,i.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}const A={icon:(0,i.jsx)(k,{}),title:(0,i.jsx)(a.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function N(e){return(0,i.jsx)(x,{...A,...e,className:(0,s.A)("alert alert--info",e.className),children:e.children})}function w(e){return(0,i.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}const S={icon:(0,i.jsx)(w,{}),title:(0,i.jsx)(a.A,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function C(e){return(0,i.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}const z={icon:(0,i.jsx)(C,{}),title:(0,i.jsx)(a.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};const D={icon:(0,i.jsx)(w,{}),title:(0,i.jsx)(a.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};const M={...{note:v,tip:T,info:N,warning:function(e){return(0,i.jsx)(x,{...S,...e,className:(0,s.A)("alert alert--warning",e.className),children:e.children})},danger:function(e){return(0,i.jsx)(x,{...z,...e,className:(0,s.A)("alert alert--danger",e.className),children:e.children})}},...{secondary:e=>(0,i.jsx)(v,{title:"secondary",...e}),important:e=>(0,i.jsx)(N,{title:"important",...e}),success:e=>(0,i.jsx)(T,{title:"success",...e}),caution:function(e){return(0,i.jsx)(x,{...D,...e,className:(0,s.A)("alert alert--warning",e.className),children:e.children})}}};function P(e){const n=o(e),t=(r=n.type,M[r]||(console.warn(`No admonition component found for admonition type "${r}". Using Info as fallback.`),M.info));var r;return(0,i.jsx)(t,{...n})}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}},9431:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"installation/terraform/gcp","title":"GCP","description":"Setting up Terraform","source":"@site/docs/installation/terraform/gcp.mdx","sourceDirName":"installation/terraform","slug":"/installation/terraform/gcp","permalink":"/security-analysis-tool/docs/installation/terraform/gcp","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Azure","permalink":"/security-analysis-tool/docs/installation/terraform/azure"},"next":{"title":"Funtionality","permalink":"/security-analysis-tool/docs/functionality"}}');var i=t(4848),o=t(8453),s=t(2362);const a={sidebar_position:7},c="GCP",l={},d=[{value:"Setting up Terraform",id:"setting-up-terraform",level:2},{value:"Run Terraform",id:"run-terraform",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"gcp",children:"GCP"})}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-terraform",children:"Setting up Terraform"}),"\n",(0,i.jsx)(s.A,{type:"note",title:"Note",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SAT v0.2.0 or higher"})," brings full support for Unity Catalog. Now you can pick your catalog instead of hive_metastore. Plus, you get to choose your own schema name."]})}),"\n",(0,i.jsxs)(n.p,{children:["Step 1: ",(0,i.jsx)(n.a,{href:"https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli",children:"Install Terraform"})]}),"\n",(0,i.jsxs)(n.p,{children:["Step 2: ",(0,i.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git",children:"Install Git"})," on local machine"]}),"\n",(0,i.jsx)(n.p,{children:"Step 3: Git Clone Repo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"git clone https://github.com/databricks-industry-solutions/security-analysis-tool.git\n"})}),"\n",(0,i.jsx)(n.p,{children:"Step 4: Change Directories"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cd security-analysis-tool/terraform/<cloud>/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Step 5: Generate a ",(0,i.jsx)(n.code,{children:"terraform.tfvars"})," file base on ",(0,i.jsx)(n.code,{children:"template.tfvars"})]}),"\n",(0,i.jsxs)(n.p,{children:["Using any editor set the values in the ",(0,i.jsx)(n.code,{children:"terraform.tfvars"})," file. The descriptions of all the variables are located in the ",(0,i.jsx)(n.code,{children:"variables.tf"})," file. Once the variables are set you are ready to run Terraform."]}),"\n",(0,i.jsx)(n.p,{children:"Further Documentation for some of the variables:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.gcp.databricks.com/workspace/workspace-details.html#workspace-instance-names-urls-and-ids",children:"workspace_id"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.gcp.databricks.com/administration-guide/account-settings/#locate-your-account-id",children:"account_console_id"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/security-analysis-tool/docs/installation/standard/gcp",children:"GCP Specific variables"})," and navigate to the GCP section"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Proxies are now supported as part of SAT. You can add your HTTP and HTTPS links to use your proxies."})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "http": "http://example.com",\n    "https": "https://example.com"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"run-terraform",children:"Run Terraform"}),"\n",(0,i.jsxs)(n.p,{children:["Step 6: Terraform ",(0,i.jsx)(n.a,{href:"https://developer.hashicorp.com/terraform/cli/commands/init",children:"Init"})]}),"\n",(0,i.jsx)(n.p,{children:"The terraform init command initializes a working directory containing configuration files and installs plugins for required providers."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"terraform init\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Step 7: Terraform ",(0,i.jsx)(n.a,{href:"https://developer.hashicorp.com/terraform/cli/commands/plan",children:"Plan"})]}),"\n",(0,i.jsx)(n.p,{children:"The terraform plan command creates an execution plan, which lets you preview the changes that Terraform plans to make to your infrastructure. By default, when Terraform creates a plan it:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reads the current state of any already-existing remote objects to make sure that the Terraform state is up-to-date."}),"\n",(0,i.jsx)(n.li,{children:"Compares the current configuration to the prior state and noting any differences."}),"\n",(0,i.jsx)(n.li,{children:"Proposes a set of change actions that should, if applied, make the remote objects match the configuration."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"terraform plan\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Step 8: Terraform ",(0,i.jsx)(n.a,{href:"https://developer.hashicorp.com/terraform/cli/commands/apply",children:"Apply"})]}),"\n",(0,i.jsx)(n.p,{children:"The terraform apply command executes the actions proposed in a Terraform plan."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"terraform apply\n"})}),"\n",(0,i.jsx)(n.p,{children:"Step 9: Run Jobs"}),"\n",(0,i.jsx)(n.p,{children:'You now have two jobs ("SAT Initializer Notebook" & "SAT Driver Notebook"). Run "SAT Initializer Notebook" and when it completes run "SAT Driver Notebook". "SAT Initializer Notebook" should only be run once (although you can run it multiple times, it only needs to be run successfully one time), and "SAT Driver Notebook" can be run periodically (its scheduled to run once every Monday, Wednesday, and Friday).'}),"\n",(0,i.jsx)(n.p,{children:"Step 10: SAT Dashboard"}),"\n",(0,i.jsx)(n.p,{children:"Go to the SQL persona, select the Dashboard icon in the left menu and then select the SAT Dashboard. Once the dashboard loads pick the Workspace from the dropdown and refresh the dashboard"}),"\n",(0,i.jsx)(n.p,{children:"Supplemental Documentation:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://docs.databricks.com/dev-tools/terraform/index.html",children:"Databricks Documentation Terraform"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://registry.terraform.io/providers/databricks/databricks/latest/docs",children:"Databricks Terraform Provider Docs"})}),"\n",(0,i.jsx)(n.p,{children:"Additional Considerations:"}),"\n",(0,i.jsxs)(n.p,{children:["Your jobs may fail if there was a pre-existing secret scope named ",(0,i.jsx)(n.code,{children:"sat_scope"})," when you run ",(0,i.jsx)(n.code,{children:"terraform apply"}),". To remedy this, you will need to change the name of your secret scope in ",(0,i.jsx)(n.code,{children:"secrets.tf"}),", re-run terraform apply, and then navigate to ",(0,i.jsx)(n.code,{children:"Workspace -> Applications -> SAT-TF /notebooks/Utils/initialize"})," and change the secret scope name in  6 places (3 times in CMD 4 and 3 times in CMD 5). You then can re-run your failed jobs."]}),"\n",(0,i.jsxs)(n.p,{children:["Congratulations!!! ",(0,i.jsx)(n.a,{href:"/security-analysis-tool/docs/functionality",children:"Please review the setup documentation for the instructions on usage, FAQs and general understanding of SAT setup"})]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);